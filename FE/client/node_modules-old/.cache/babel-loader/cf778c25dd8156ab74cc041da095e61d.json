{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.native.js)\r\n * Version: 21.1.4\r\n * Build date: Mon Jun 21 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { isDxMouseWheelEvent } from \"../../events/utils/index\";\nimport { noop } from \"../../core/utils/common\";\nimport { each } from \"../../core/utils/iterator\";\nimport devices from \"../../core/devices\";\nimport Class from \"../../core/class\";\nimport Scrollbar from \"./ui.scrollbar\";\nvar SCROLLABLE_NATIVE = \"dxNativeScrollable\";\nvar SCROLLABLE_NATIVE_CLASS = \"dx-scrollable-native\";\nvar SCROLLABLE_SCROLLBAR_SIMULATED = \"dx-scrollable-scrollbar-simulated\";\nvar SCROLLABLE_SCROLLBARS_HIDDEN = \"dx-scrollable-scrollbars-hidden\";\nvar VERTICAL = \"vertical\";\nvar HORIZONTAL = \"horizontal\";\nvar HIDE_SCROLLBAR_TIMEOUT = 500;\nvar NativeStrategy = Class.inherit({\n  ctor: function (scrollable) {\n    this._init(scrollable);\n  },\n  _init: function (scrollable) {\n    this._component = scrollable;\n    this._$element = scrollable.$element();\n    this._$container = scrollable._$container;\n    this._$content = scrollable._$content;\n    this._direction = scrollable.option(\"direction\");\n    this._useSimulatedScrollbar = scrollable.option(\"useSimulatedScrollbar\");\n    this._showScrollbar = scrollable.option(\"showScrollbar\");\n    this.option = scrollable.option.bind(scrollable);\n    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\n    this._isLocked = scrollable._isLocked.bind(scrollable);\n    this._isDirection = scrollable._isDirection.bind(scrollable);\n    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\n    this._getScrollOffset = scrollable._getScrollOffset.bind(scrollable);\n    this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable);\n  },\n  render: function () {\n    var device = devices.real();\n    var deviceType = device.platform;\n\n    this._$element.addClass(SCROLLABLE_NATIVE_CLASS).addClass(SCROLLABLE_NATIVE_CLASS + \"-\" + deviceType).toggleClass(SCROLLABLE_SCROLLBARS_HIDDEN, !this._showScrollbar);\n\n    if (this._showScrollbar && this._useSimulatedScrollbar) {\n      this._renderScrollbars();\n    }\n  },\n  updateBounds: noop,\n  _renderScrollbars: function () {\n    this._scrollbars = {};\n    this._hideScrollbarTimeout = 0;\n\n    this._$element.addClass(SCROLLABLE_SCROLLBAR_SIMULATED);\n\n    this._renderScrollbar(VERTICAL);\n\n    this._renderScrollbar(HORIZONTAL);\n  },\n  _renderScrollbar: function (direction) {\n    if (!this._isDirection(direction)) {\n      return;\n    }\n\n    this._scrollbars[direction] = new Scrollbar($(\"<div>\").appendTo(this._$element), {\n      direction: direction,\n      expandable: this._component.option(\"scrollByThumb\")\n    });\n  },\n  handleInit: noop,\n  handleStart: noop,\n  handleMove: function (e) {\n    if (this._isLocked()) {\n      e.cancel = true;\n      return;\n    }\n\n    if (this._allowedDirection()) {\n      e.originalEvent.isScrollingEvent = true;\n    }\n  },\n  handleEnd: noop,\n  handleCancel: noop,\n  handleStop: noop,\n  _eachScrollbar: function (callback) {\n    callback = callback.bind(this);\n    each(this._scrollbars || {}, function (direction, scrollbar) {\n      callback(scrollbar, direction);\n    });\n  },\n  createActions: function () {\n    this._scrollAction = this._createActionByOption(\"onScroll\");\n    this._updateAction = this._createActionByOption(\"onUpdated\");\n  },\n  _createActionArgs: function () {\n    var {\n      left: left,\n      top: top\n    } = this.location();\n    return {\n      event: this._eventForUserAction,\n      scrollOffset: this._getScrollOffset(),\n      reachedLeft: this._isReachedLeft(left),\n      reachedRight: this._isReachedRight(left),\n      reachedTop: this._isDirection(VERTICAL) ? top >= 0 : void 0,\n      reachedBottom: this._isDirection(VERTICAL) ? Math.abs(top) >= this._getMaxOffset().top : void 0\n    };\n  },\n  _isReachedLeft: function () {\n    return this._isDirection(HORIZONTAL) ? this.location().left >= 0 : void 0;\n  },\n  _isReachedRight: function () {\n    return this._isDirection(HORIZONTAL) ? Math.abs(this.location().left) >= this._getMaxOffset().left : void 0;\n  },\n  handleScroll: function (e) {\n    this._component._updateRtlConfig();\n\n    this._eventForUserAction = e;\n\n    this._moveScrollbars();\n\n    this._scrollAction(this._createActionArgs());\n  },\n  _moveScrollbars: function () {\n    var {\n      top: top,\n      left: left\n    } = this._getScrollOffset();\n\n    this._eachScrollbar(function (scrollbar) {\n      scrollbar.moveTo({\n        top: -top,\n        left: -left\n      });\n      scrollbar.option(\"visible\", true);\n    });\n\n    this._hideScrollbars();\n  },\n  _hideScrollbars: function () {\n    clearTimeout(this._hideScrollbarTimeout);\n    this._hideScrollbarTimeout = setTimeout(function () {\n      this._eachScrollbar(function (scrollbar) {\n        scrollbar.option(\"visible\", false);\n      });\n    }.bind(this), HIDE_SCROLLBAR_TIMEOUT);\n  },\n  location: function () {\n    return {\n      left: -this._$container.scrollLeft(),\n      top: -this._$container.scrollTop()\n    };\n  },\n  disabledChanged: noop,\n  update: function () {\n    this._update();\n\n    this._updateAction(this._createActionArgs());\n  },\n  _update: function () {\n    this._updateDimensions();\n\n    this._updateScrollbars();\n  },\n  _updateDimensions: function () {\n    this._containerSize = {\n      height: this._$container.height(),\n      width: this._$container.width()\n    };\n    this._componentContentSize = {\n      height: this._component.$content().height(),\n      width: this._component.$content().width()\n    };\n    this._contentSize = {\n      height: this._$content.height(),\n      width: this._$content.width()\n    };\n  },\n  _updateScrollbars: function () {\n    this._eachScrollbar(function (scrollbar, direction) {\n      var dimension = direction === VERTICAL ? \"height\" : \"width\";\n      scrollbar.option({\n        containerSize: this._containerSize[dimension],\n        contentSize: this._componentContentSize[dimension]\n      });\n      scrollbar.update();\n    });\n  },\n  _allowedDirections: function () {\n    return {\n      vertical: this._isDirection(VERTICAL) && this._contentSize.height > this._containerSize.height,\n      horizontal: this._isDirection(HORIZONTAL) && this._contentSize.width > this._containerSize.width\n    };\n  },\n  dispose: function () {\n    var className = this._$element.get(0).className;\n\n    var scrollableNativeRegexp = new RegExp(SCROLLABLE_NATIVE_CLASS + \"\\\\S*\", \"g\");\n\n    if (scrollableNativeRegexp.test(className)) {\n      this._$element.removeClass(className.match(scrollableNativeRegexp).join(\" \"));\n    }\n\n    eventsEngine.off(this._$element, \".\" + SCROLLABLE_NATIVE);\n    eventsEngine.off(this._$container, \".\" + SCROLLABLE_NATIVE);\n\n    this._removeScrollbars();\n\n    clearTimeout(this._hideScrollbarTimeout);\n  },\n  _removeScrollbars: function () {\n    this._eachScrollbar(function (scrollbar) {\n      scrollbar.$element().remove();\n    });\n  },\n  scrollBy: function (distance) {\n    var location = this.location();\n\n    this._$container.scrollTop(Math.round(-location.top - distance.top));\n\n    this._$container.scrollLeft(Math.round(-location.left - distance.left));\n  },\n  validate: function (e) {\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (isDxMouseWheelEvent(e) && this._isScrolledInMaxDirection(e)) {\n      return false;\n    }\n\n    return !!this._allowedDirection();\n  },\n\n  _isScrolledInMaxDirection(e) {\n    var container = this._$container.get(0);\n\n    var result;\n\n    if (e.delta > 0) {\n      result = e.shiftKey ? !container.scrollLeft : !container.scrollTop;\n    } else if (e.shiftKey) {\n      result = container.scrollLeft >= this._getMaxOffset().left;\n    } else {\n      result = container.scrollTop >= this._getMaxOffset().top;\n    }\n\n    return result;\n  },\n\n  getDirection: function () {\n    return this._allowedDirection();\n  }\n});\nexport default NativeStrategy;","map":{"version":3,"sources":["D:/Javascript Train/REACT/first/modal/FE/client/node_modules/devextreme/esm/ui/scroll_view/ui.scrollable.native.js"],"names":["$","eventsEngine","isDxMouseWheelEvent","noop","each","devices","Class","Scrollbar","SCROLLABLE_NATIVE","SCROLLABLE_NATIVE_CLASS","SCROLLABLE_SCROLLBAR_SIMULATED","SCROLLABLE_SCROLLBARS_HIDDEN","VERTICAL","HORIZONTAL","HIDE_SCROLLBAR_TIMEOUT","NativeStrategy","inherit","ctor","scrollable","_init","_component","_$element","$element","_$container","_$content","_direction","option","_useSimulatedScrollbar","_showScrollbar","bind","_createActionByOption","_isLocked","_isDirection","_allowedDirection","_getScrollOffset","_getMaxOffset","render","device","real","deviceType","platform","addClass","toggleClass","_renderScrollbars","updateBounds","_scrollbars","_hideScrollbarTimeout","_renderScrollbar","direction","appendTo","expandable","handleInit","handleStart","handleMove","e","cancel","originalEvent","isScrollingEvent","handleEnd","handleCancel","handleStop","_eachScrollbar","callback","scrollbar","createActions","_scrollAction","_updateAction","_createActionArgs","left","top","location","event","_eventForUserAction","scrollOffset","reachedLeft","_isReachedLeft","reachedRight","_isReachedRight","reachedTop","reachedBottom","Math","abs","handleScroll","_updateRtlConfig","_moveScrollbars","moveTo","_hideScrollbars","clearTimeout","setTimeout","scrollLeft","scrollTop","disabledChanged","update","_update","_updateDimensions","_updateScrollbars","_containerSize","height","width","_componentContentSize","$content","_contentSize","dimension","containerSize","contentSize","_allowedDirections","vertical","horizontal","dispose","className","get","scrollableNativeRegexp","RegExp","test","removeClass","match","join","off","_removeScrollbars","remove","scrollBy","distance","round","validate","_isScrolledInMaxDirection","container","result","delta","shiftKey","getDirection"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scroll_view/ui.scrollable.native.js)\r\n * Version: 21.1.4\r\n * Build date: Mon Jun 21 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    isDxMouseWheelEvent\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport devices from \"../../core/devices\";\r\nimport Class from \"../../core/class\";\r\nimport Scrollbar from \"./ui.scrollbar\";\r\nvar SCROLLABLE_NATIVE = \"dxNativeScrollable\";\r\nvar SCROLLABLE_NATIVE_CLASS = \"dx-scrollable-native\";\r\nvar SCROLLABLE_SCROLLBAR_SIMULATED = \"dx-scrollable-scrollbar-simulated\";\r\nvar SCROLLABLE_SCROLLBARS_HIDDEN = \"dx-scrollable-scrollbars-hidden\";\r\nvar VERTICAL = \"vertical\";\r\nvar HORIZONTAL = \"horizontal\";\r\nvar HIDE_SCROLLBAR_TIMEOUT = 500;\r\nvar NativeStrategy = Class.inherit({\r\n    ctor: function(scrollable) {\r\n        this._init(scrollable)\r\n    },\r\n    _init: function(scrollable) {\r\n        this._component = scrollable;\r\n        this._$element = scrollable.$element();\r\n        this._$container = scrollable._$container;\r\n        this._$content = scrollable._$content;\r\n        this._direction = scrollable.option(\"direction\");\r\n        this._useSimulatedScrollbar = scrollable.option(\"useSimulatedScrollbar\");\r\n        this._showScrollbar = scrollable.option(\"showScrollbar\");\r\n        this.option = scrollable.option.bind(scrollable);\r\n        this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\r\n        this._isLocked = scrollable._isLocked.bind(scrollable);\r\n        this._isDirection = scrollable._isDirection.bind(scrollable);\r\n        this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\r\n        this._getScrollOffset = scrollable._getScrollOffset.bind(scrollable);\r\n        this._getMaxOffset = scrollable._getMaxOffset.bind(scrollable)\r\n    },\r\n    render: function() {\r\n        var device = devices.real();\r\n        var deviceType = device.platform;\r\n        this._$element.addClass(SCROLLABLE_NATIVE_CLASS).addClass(SCROLLABLE_NATIVE_CLASS + \"-\" + deviceType).toggleClass(SCROLLABLE_SCROLLBARS_HIDDEN, !this._showScrollbar);\r\n        if (this._showScrollbar && this._useSimulatedScrollbar) {\r\n            this._renderScrollbars()\r\n        }\r\n    },\r\n    updateBounds: noop,\r\n    _renderScrollbars: function() {\r\n        this._scrollbars = {};\r\n        this._hideScrollbarTimeout = 0;\r\n        this._$element.addClass(SCROLLABLE_SCROLLBAR_SIMULATED);\r\n        this._renderScrollbar(VERTICAL);\r\n        this._renderScrollbar(HORIZONTAL)\r\n    },\r\n    _renderScrollbar: function(direction) {\r\n        if (!this._isDirection(direction)) {\r\n            return\r\n        }\r\n        this._scrollbars[direction] = new Scrollbar($(\"<div>\").appendTo(this._$element), {\r\n            direction: direction,\r\n            expandable: this._component.option(\"scrollByThumb\")\r\n        })\r\n    },\r\n    handleInit: noop,\r\n    handleStart: noop,\r\n    handleMove: function(e) {\r\n        if (this._isLocked()) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        if (this._allowedDirection()) {\r\n            e.originalEvent.isScrollingEvent = true\r\n        }\r\n    },\r\n    handleEnd: noop,\r\n    handleCancel: noop,\r\n    handleStop: noop,\r\n    _eachScrollbar: function(callback) {\r\n        callback = callback.bind(this);\r\n        each(this._scrollbars || {}, (function(direction, scrollbar) {\r\n            callback(scrollbar, direction)\r\n        }))\r\n    },\r\n    createActions: function() {\r\n        this._scrollAction = this._createActionByOption(\"onScroll\");\r\n        this._updateAction = this._createActionByOption(\"onUpdated\")\r\n    },\r\n    _createActionArgs: function() {\r\n        var {\r\n            left: left,\r\n            top: top\r\n        } = this.location();\r\n        return {\r\n            event: this._eventForUserAction,\r\n            scrollOffset: this._getScrollOffset(),\r\n            reachedLeft: this._isReachedLeft(left),\r\n            reachedRight: this._isReachedRight(left),\r\n            reachedTop: this._isDirection(VERTICAL) ? top >= 0 : void 0,\r\n            reachedBottom: this._isDirection(VERTICAL) ? Math.abs(top) >= this._getMaxOffset().top : void 0\r\n        }\r\n    },\r\n    _isReachedLeft: function() {\r\n        return this._isDirection(HORIZONTAL) ? this.location().left >= 0 : void 0\r\n    },\r\n    _isReachedRight: function() {\r\n        return this._isDirection(HORIZONTAL) ? Math.abs(this.location().left) >= this._getMaxOffset().left : void 0\r\n    },\r\n    handleScroll: function(e) {\r\n        this._component._updateRtlConfig();\r\n        this._eventForUserAction = e;\r\n        this._moveScrollbars();\r\n        this._scrollAction(this._createActionArgs())\r\n    },\r\n    _moveScrollbars: function() {\r\n        var {\r\n            top: top,\r\n            left: left\r\n        } = this._getScrollOffset();\r\n        this._eachScrollbar((function(scrollbar) {\r\n            scrollbar.moveTo({\r\n                top: -top,\r\n                left: -left\r\n            });\r\n            scrollbar.option(\"visible\", true)\r\n        }));\r\n        this._hideScrollbars()\r\n    },\r\n    _hideScrollbars: function() {\r\n        clearTimeout(this._hideScrollbarTimeout);\r\n        this._hideScrollbarTimeout = setTimeout(function() {\r\n            this._eachScrollbar((function(scrollbar) {\r\n                scrollbar.option(\"visible\", false)\r\n            }))\r\n        }.bind(this), HIDE_SCROLLBAR_TIMEOUT)\r\n    },\r\n    location: function() {\r\n        return {\r\n            left: -this._$container.scrollLeft(),\r\n            top: -this._$container.scrollTop()\r\n        }\r\n    },\r\n    disabledChanged: noop,\r\n    update: function() {\r\n        this._update();\r\n        this._updateAction(this._createActionArgs())\r\n    },\r\n    _update: function() {\r\n        this._updateDimensions();\r\n        this._updateScrollbars()\r\n    },\r\n    _updateDimensions: function() {\r\n        this._containerSize = {\r\n            height: this._$container.height(),\r\n            width: this._$container.width()\r\n        };\r\n        this._componentContentSize = {\r\n            height: this._component.$content().height(),\r\n            width: this._component.$content().width()\r\n        };\r\n        this._contentSize = {\r\n            height: this._$content.height(),\r\n            width: this._$content.width()\r\n        }\r\n    },\r\n    _updateScrollbars: function() {\r\n        this._eachScrollbar((function(scrollbar, direction) {\r\n            var dimension = direction === VERTICAL ? \"height\" : \"width\";\r\n            scrollbar.option({\r\n                containerSize: this._containerSize[dimension],\r\n                contentSize: this._componentContentSize[dimension]\r\n            });\r\n            scrollbar.update()\r\n        }))\r\n    },\r\n    _allowedDirections: function() {\r\n        return {\r\n            vertical: this._isDirection(VERTICAL) && this._contentSize.height > this._containerSize.height,\r\n            horizontal: this._isDirection(HORIZONTAL) && this._contentSize.width > this._containerSize.width\r\n        }\r\n    },\r\n    dispose: function() {\r\n        var className = this._$element.get(0).className;\r\n        var scrollableNativeRegexp = new RegExp(SCROLLABLE_NATIVE_CLASS + \"\\\\S*\", \"g\");\r\n        if (scrollableNativeRegexp.test(className)) {\r\n            this._$element.removeClass(className.match(scrollableNativeRegexp).join(\" \"))\r\n        }\r\n        eventsEngine.off(this._$element, \".\" + SCROLLABLE_NATIVE);\r\n        eventsEngine.off(this._$container, \".\" + SCROLLABLE_NATIVE);\r\n        this._removeScrollbars();\r\n        clearTimeout(this._hideScrollbarTimeout)\r\n    },\r\n    _removeScrollbars: function() {\r\n        this._eachScrollbar((function(scrollbar) {\r\n            scrollbar.$element().remove()\r\n        }))\r\n    },\r\n    scrollBy: function(distance) {\r\n        var location = this.location();\r\n        this._$container.scrollTop(Math.round(-location.top - distance.top));\r\n        this._$container.scrollLeft(Math.round(-location.left - distance.left))\r\n    },\r\n    validate: function(e) {\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (isDxMouseWheelEvent(e) && this._isScrolledInMaxDirection(e)) {\r\n            return false\r\n        }\r\n        return !!this._allowedDirection()\r\n    },\r\n    _isScrolledInMaxDirection(e) {\r\n        var container = this._$container.get(0);\r\n        var result;\r\n        if (e.delta > 0) {\r\n            result = e.shiftKey ? !container.scrollLeft : !container.scrollTop\r\n        } else if (e.shiftKey) {\r\n            result = container.scrollLeft >= this._getMaxOffset().left\r\n        } else {\r\n            result = container.scrollTop >= this._getMaxOffset().top\r\n        }\r\n        return result\r\n    },\r\n    getDirection: function() {\r\n        return this._allowedDirection()\r\n    }\r\n});\r\nexport default NativeStrategy;\r\n"]},"metadata":{},"sourceType":"module"}